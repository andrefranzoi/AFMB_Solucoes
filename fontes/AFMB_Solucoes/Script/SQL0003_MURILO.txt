DROP TABLE FIS_SERIEDOC;

CREATE GENERATOR GEN_FIS_SERIEDOC_ID;

CREATE TABLE FIS_SERIEDOC (
    CODIGO INTEGER NOT NULL,
    EMPRESA INTEGER DEFAULT 1 NOT NULL,
    DESCRICAO VARCHAR(200),
    STATUS VARCHAR(10),
    TIPO VARCHAR(10) NOT NULL,
    SERIE VARCHAR(10) NOT NULL,
    PROXIMO_NUMERO INTEGER
    );

ALTER TABLE FIS_SERIEDOC ADD PRIMARY KEY (EMPRESA, SERIE, TIPO);

CREATE OR ALTER TRIGGER FIS_SERIEDOC_BI FOR FIS_SERIEDOC
ACTIVE BEFORE INSERT POSITION 0
AS
BEGIN
  IF (NEW.CODIGO IS NULL) THEN
    NEW.CODIGO = GEN_ID(GEN_FIS_SERIEDOC_ID,1);
END;

INSERT INTO FIS_SERIEDOC (CODIGO, EMPRESA, DESCRICAO, STATUS, TIPO, SERIE, PROXIMO_NUMERO)
                  VALUES (1, 1, '(NF-e) Nota Fiscal Eletrônica', 'S', 'NF-e', '1', 1);
INSERT INTO FIS_SERIEDOC (CODIGO, EMPRESA, DESCRICAO, STATUS, TIPO, SERIE, PROXIMO_NUMERO)
                  VALUES (2, 1, '(NFS-e) Nota Fiscal de Serviços Eletrônica', 'S', 'NFS-e', 'A', 1);
INSERT INTO FIS_SERIEDOC (CODIGO, EMPRESA, DESCRICAO, STATUS, TIPO, SERIE, PROXIMO_NUMERO)
                  VALUES (3, 1, '(Outros) Outros', 'S', 'Outros', '99', 1);

COMMIT WORK;